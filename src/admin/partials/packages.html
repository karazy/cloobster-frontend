<!-- Field: name, maxSpotCount, quotaExceeded, (Translation mittels Key abarbeiten basierend Paketname), basic, cost, status (approved, pending, canceled), startDate, endDate, Vererbung in Objectify prÃ¼fen Template und davon erbt konkrete Subscription -->
<div class="partial-wrapper">
	<div class="row-fluid">
		<div class="span2">
			<div class="data-container-with-title">
				<h4 class="data-container-title">Packages</h4>
				<div class="data-container-block data-container-seperator">
					<div class="row-fluid">
						<button class="btn btn-primary span6" ng-click="newPackage()"><i class="icon-plus-sign icon-white"></i> New</button>
						<button class="btn btn-primary span6" ng-click="showPackages()"><i class="icon-list-alt icon-white"></i> Show all</button>						 
					</div>
				</div>
				<ul class="nav nav-pills nav-stacked data-container-block data-container-large data-container-scrollable">
		        	<li ng-repeat="p in packages | orderBy:['name'] " ng-class="{active: currentPackage.name == p.name}">
		        		<a ng-click="showPackage(p)">{{p.name}} <span class="badge badge-success" ng-show="p.basic">Basic</span></a>
			        </li>
			    </ul>
			</div>
		</div>
		<!-- single package view -->
		<div ng-hide="showAllPackages == true" >
			<!-- edit existing package -->
			<div class="span4" ng-show="currentPackage && currentPackage.id">
				<div class="data-container-with-title">
					<h4 class="data-container-title">Edit Package</h4>						
						<div class="data-container-block data-container-small">
							<div simple-property-editor editor-title="Name" editor-property="currentPackage.name" editor-on-save="savePackage()" editor-placeholder="infopage.placeholder.shortText" editor-required>
								<h5 class="edit">
									{{currentPackage.name}} <i class="icon-edit icon-black"></i>
								</h5>
							</div>
							<div simple-property-editor editor-title="Maximum Spots" editor-property="currentPackage.maxSpotCount" editor-on-save="savePackage()" editor-placeholder="infopage.placeholder.shortText" editor-required editor-type="number">
								<p class="edit">
									{{currentPackage.maxSpotCount}} <i class="icon-edit icon-black"></i>
								</p>
							</div>
							<div simple-property-editor editor-title="Maximum Spots" editor-property="currentPackage.fee" editor-on-save="savePackage()" editor-placeholder="infopage.placeholder.shortText" editor-required editor-type="number">
								<p class="edit">
									{{currentPackage.fee}} <i class="icon-edit icon-black"></i>
								</p>
							</div>
							<div class="row-fluid" ng-hide="currentPackage.basic">
								<button class="btn btn-success span6" ng-click="setCurrentPackageAsBasic()"><i class="icon-ok icon-white"></i> Set as Basic</button>								
								<button class="btn span6" ng-click="deletePackage()"><i class="icon-trash"></i></button>
							</div>
							<div ng-show="currentPackage.basic">
								Basic packages can't be deleted.
							</div>							
					</div>
				</div>
			</div>
			<!-- add new package -->
			<div class="span4" ng-show="currentPackage && !currentPackage.id">
				<div class="data-container-with-title">
					<h4 class="data-container-title">New Package</h4>
					<div class="data-container-block">
						<form name="newPackageForm" ng-submit="savePackage()" class="form-horizontal">
							<div class="control-group" ng-class="getFieldInputClass(newPackageForm.packageName.$dirty, newPackageForm.packageName.$invalid)">
								<label for="packageName" class="control-label">Name*</label>
								<div class="controls">
									<input name="packageName" id="packageName" type='text' ng-model="currentPackage.name" required ng-minlength="1" placeholder="e.g. M">	
									 <div class="help-inline" ng-show="newPackageForm.packageName.$dirty && newPackageForm.packageName.$invalid">
						          		<span ng-show="newPackageForm.packageName.$error.required">Required field.</span>
						          		<span ng-show="newPackageForm.packageName.$error.minlength">At least one character required.</span>
						        	</div>
					        	</div>
				        	</div>
				        	<div class="control-group" ng-class="getFieldInputClass(newPackageForm.controls.$dirty, newPackageForm.controls.$invalid)">
								<label for="spotsCount" class="control-label">Maximum number of spots*</label>
								<div class="controls">
									<input name="spotsCount" id="spotsCount" type='number' ng-model="currentPackage.maxSpotCount" required min="0" max="100000" placeholder="e.g. 150 (0 means unlimited)">	
									 <div class="help-inline" ng-show="newPackageForm.spotsCount.$dirty && newPackageForm.spotsCount.$invalid">
						          		<span ng-show="newPackageForm.spotsCount.$error.required">Required field.</span>
						          		<span ng-show="newPackageForm.spotsCount.$error.min">Values must be equal or greater then zero.</span>
						        	</div>
					        	</div>
				        	</div>				        	
				        	<div class="control-group" ng-class="getFieldInputClass(newPackageForm.fee.$dirty, newPackageForm.fee.$invalid)">
								<label for="fee" class="control-label">Fee*</label>
								<div class="controls">
									<input name="fee" id="fee" type='number' ng-model="currentPackage.fee" min="0" max="10000" required>	
									 <div class="help-inline" ng-show="newPackageForm.fee.$dirty && newPackageForm.fee.$invalid">
						          		<span ng-show="newPackageForm.fee.$error.required">Required field.</span>
						          		<span ng-show="newPackageForm.fee.$error.min">Values must be equal or greater then zero.</span>
						          		<span ng-show="newPackageForm.fee.$error.max">Maximum is 10000.</span>
						        	</div>
					        	</div>
				        	</div>
				        	<div class="control-group" ng-class="getFieldInputClass(newPackageForm.basic.$dirty, newPackageForm.basic.$invalid)">
								<label for="basic" class="control-label">Basic</label>
								<div class="controls">
									<input name="basic" id="basic" type='checkbox' ng-model="currentPackage.basic">	
									 <div class="help-inline" ng-show="newPackageForm.basic.$dirty && newPackageForm.basic.$invalid">
						          		<span ng-show="newPackageForm.basic.$error.required">Required field.</span>
						          		<span ng-show="newPackageForm.basic.$error.min">Values must be equal or greater then zero.</span>
						        	</div>
					        	</div>
				        	</div>
				        	<div class="row-fluid">
				        		<div class="span8"></div>
				        		<button type="submit" class="btn btn-primary span4" ng-disabled="newPackageForm.fee.$invalid">Save</button>
				        	</div>				        	
						</form>
					</div>
				</div>
			</div>
			<!-- empty package placeholder -->
			<div class="span4" ng-hide="currentPackage">
				<div class="data-container-with-title data-container-inactive">
					<h4 class="data-container-title">Package</h4>
					<div class="data-container-block data-container-small">
						<p>Add new packages or edit existing ones.</p>
					</div>
				</div>
			</div>
		</div>
		<!-- alll packages view -->
		<div class="span8" ng-show="showAllPackages == true">
			<div class="data-container-with-title">
				<h4 class="data-container-title">All Packages</h4>
				<div class="data-container-block">
					<p ng-hide="packages.length > 0">No packages configured.</p>
					<table class="table table-striped table-hover table-bordered">
						<tr>
							<th>Name</th>
							<th>Maximum Spots</th>
							<th>Fee</th>
							<th>Basic</th>
						</tr>						
						<tr ng-repeat="p in packages">
							<td>{{p.name}}</td>
							<td>{{p.maxSpotCount | mSCFF:p.basic}}</td>
							<td>{{p.fee}}</td>
							<td>
								<i class="icon-ok" ng-show="p.basic"></i>
								<button class="btn btn-small" ng-click="setBasicPackage(p)" ng-hide="p.basic">Set basic</i>
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>

