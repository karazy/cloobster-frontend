<div ng-include="'partials/businesses_header.html'">
</div>
<div class="spots-wrapper">
	<div class="row-fluid">
		<div class="span8">
			<p l="areas.description" id="spotsPartialDescription">For each "cloobster location" you can add several "service areas" (like "Bar", "Rooms, "Spa", "Conference Area", etc.).<br>
				Each service area has different spots and a selection of product categories.</p>
			<div class="alert alert-block" ng-show="!activeSubscription || activeSubscription.basic">
			 	 <div l="areas.subscription.basic.description">
			 		<span class="label label-important">Basic</span> You have a basic subscription. You can create areas and spots. But customers won't be able to order or place VIP calls. 
			 		<a href="https://www.cloobster.com" target="_blank">Learn more</a> or <a href="#/businesses/{{activeBusiness.id}}">upgrade</a>.
			 	</div>
			</div>
		</div>
		<div class="span4" ng-show="activeSubscription">
			<!-- <h4 l="business.detail.subscriptioncounter.title" style="margin: 0 0 5px 0;">Used spots</h4> -->
			<div id="spotCountContainer" class="alert pull-right" ng-class="{ 'alert-info' : !activeSubscription.quotaExceeded, 'alert-error' : activeSubscription.quotaExceeded}">
				<span l="business.detail.subscriptioncounter.title" style="margin-right: 5px;">
					Used spots
				</span>
				 <span>
				 	{{activeBusiness.spotCount}} / {{activeSubscription.maxSpotCount | mSCFF:activeSubscription.basic}}
				 </span>
			</div>
			<script type="text/javascript">
				//calculate height of spot container
				try {
				var heightWrapper, titleHeight = 0, spotContainerHeight;
				heightWrapper = jQuery('#spotsPartialDescription').height();
				//get h4 element
				titleHeight = jQuery('#spotCountContainer').prev().height();
				//jQuery('#spotCountContainer').height(heightWrapper - titleHeight);
				// spotContainerHeight = jQuery('#spotCountContainer').height();
				// $('#spotCountContainer').css('line-height', spotContainerHeight + 'px');
				// 
				} catch(e) {
					//fail silently
				}
			</script>
		</div>
	</div>
	<div class="row-fluid">
		<!-- first column -->
		<div class="data-container-with-title span3">
			<h4 class="data-container-title" l="areas.list.title">Your service areas</h4>
			<div class="data-container-block data-container-seperator">
				<div class="row-fluid">					
					<button class="btn btn-primary span6" ng-click="createArea()" ng-hide="activeBusiness.basic"><i class="icon-plus-sign icon-white"></i> <span l="common.new">New</span></button>
					<span simple-confirm-dialog dialog-title="common.hint" dialog-text="areas.basicmode.message.text" dialog-class="alert-error"
					 dialog-on-confirm="createArea()" dialog-confirm-button="common.confirm" dialog-disabled="!activeBusiness.basic" ng-show="activeBusiness.basic">
						<button class="btn btn-primary span6" ng-show="activeBusiness.basic"><i class="icon-plus-sign icon-white"></i> <span l="common.new">New</span></button>
					</span>
				</div>
			</div>
		<!-- 	<div class="loading-indicator" ng-show="areas == null">
			</div>
			<div ng-show="areas.length == 0">
				Keine Elemente
			</div> -->
			<ul class="nav nav-pills nav-stacked data-container-block data-container-large data-container-scrollable">
		        <li ng-repeat="area in areas | orderBy:['-welcome','name'] " ng-class="{active: currentArea.id == area.id}">	        	
		        	<a ng-click="loadArea(area)">{{area.name}}  <i class="icon-ban-circle icon-black" ng-hide="area.active"></i></a>
		        </li>
		    </ul>	
		</div><!-- end first column -->

		<!-- 2. column -->
		<div class="span5" ng-show="currentArea">
			<div class="data-container-with-title">
				<h4 class="data-container-title" l="areas.detail.title">Edit Service Area</h4>
				<div class="data-container-block">
					<!-- <div class=" common-wrapper common-wrapper-detail-list" > -->

						<div simple-property-editor editor-title="areas.editor.name" editor-property="currentArea.name" editor-on-save="saveArea()" editor-max-length="20" editor-required editor-placeholder="areas.placeholder.name">
							<h4 class="edit" tooltip="areas.editor.name.tooltip">
							<span l="areas.placeholder.name" ng-hide="currentArea.name" ng-class="{'text-error' : areaInvalid, 'simple-property-placeholder' : !areaInvalid}">e. g. Room service*</span>
							{{currentArea.name}} <i class="icon-edit icon-black"></i></h4>
						</div>
						<div simple-property-editor editor-title="areas.editor.description" editor-property="currentArea.description" editor-on-save="saveArea()" editor-type="textarea" editor-placeholder="areas.placeholder.description">
							<p class="edit" tooltip="areas.editor.description.tooltip">
								<span l="areas.placeholder.description" ng-hide="currentArea.description" class="simple-property-placeholder">Description</span>
								{{currentArea.description}} <i class="icon-edit icon-black"></i></p>
						</div>
						<div ng-show="areaInvalid" class="text-error">
			    		<span l="validation.field.required">* Please fill out all required fields.</span>
			    	</div>
						<div class="row-fluid" ng-show="currentArea.id">
							<!-- Active toggle buttons -->
							<button class="btn btn-success span4" type="button" ng-click="toggleAreaActive()" ng-model="currentArea.active" ng-show="currentArea.active && currentArea.id"><i class="icon-ok icon-white"></i> <span l="common.active">Active</span></button>
			    			<button class="btn btn-danger span4" style="margin-left: 0px !important;" type="button" ng-click="toggleAreaActive()" ng-model="currentArea.active" ng-show="!currentArea.active && currentArea.id"><i class="icon-ban-circle icon-white"></i> <span l="common.inactive">Inactive</span></button>
								<!-- Barcode required toggle buttons -->
							<button class="btn btn-warning span6" type="button"ng-click="currentArea.barcodeRequired = false;saveArea()" ng-show="currentArea.barcodeRequired && currentArea.id"><i class="icon-qrcode icon-white"></i> <span l="areas.editor.barcoderequired.true">Barcode required</span><i class="icon-question-sign icon-white pull-right barcodeRequiredHelp"></i></button>
			    			<button class="btn span6"type="button" ng-click="currentArea.barcodeRequired = true;saveArea()" ng-show="!currentArea.barcodeRequired && currentArea.id"><i class="icon-qrcode"></i> <span l="areas.editor.barcoderequired.false">No Barcode required</span><i class="icon-question-sign pull-right barcodeRequiredHelp"></i></button>
			    			<!-- <p class="span1"><i class="icon-question-sign" id="barcodeRequiredHelp"></i></p> -->
		    				<!-- Delete area button  -->
							<button class="btn span2" data-toggle="modal" data-target="#deleteAreaModal" ng-show="!currentArea.welcome"><i class="icon-trash"></i></button>
						</div>
						<div class="modal hide" id="deleteAreaModal">
						 	<div class="modal-header">
						    	<button type="button" class="close" data-dismiss="modal">×</button>
						    	<h3 l="areas.action.delete">Delete Area</h3>
							</div>
							<form name="areaDeleteForm" ng-submit="deleteArea(currentArea)" novalidate>
								<div class="modal-body alert-error">
							    	<p l="areas.dialog.delete.text">You're about to delete {{currentArea.name}}. The area and all spots will be deactivated for, all current checkins, will keep working, but now new checkins can be made at the correspoding spots. Data will be kept for a while until its will be deleted permanently.</p>
							    	<p l="dialog.delete.confirm">Please confirm your delete attempt by entering your password.</p>
						    		<label for="deletePassword" l="common.password">Password</label>
						    		<input type="password" id="deletePassword" name="deletePassword" ng-model="deletePassword" required></input>
						    		<span>{{deleteError}}</span>
							    </div>
							  	<div class="modal-footer">
							  		<button type="button" class="btn" data-dismiss="modal" l="common.cancel">Cancel</button>
							    	<button type="submit" class="btn btn-danger" ng-disabled="!deletePassword" l="common.delete">Delete</button>
								</div>
							</form>
						</div>
					<!-- </div> -->
				</div>
			</div>
			<!-- area spots list -->
			<div class="data-container-with-title" ng-show="currentArea.id">
				<h4 class="data-container-title" l="areas.spots.list.title">Spots</h4>
				<div class="data-container-block data-container-seperator" ng-show="!currentArea.welcome">
					<p l="areas.spots.list.description">List of spots assigned to this area. </p>
					<!-- <div class="row-fluid show-grid"> -->
						<!-- <div class="row-fluid show-grid">
  							
						<button  class="btn btn-primary span6" ng-click="createSpot()"><i class="icon-plus-sign icon-white"></i> <span l="common.new">New</span></button>
						<a  class="btn btn-primary span6" href="#spotMassCreationDialog" data-toggle="modal" ng-click="spotMassCreation = null"><i class="icon-th icon-white"></i> <span l="spot.masscreation.button">Multiple</span></a>
							
						</div>	 -->					
					<!-- </div> -->
					<div class="btn-toolbar">						
						<div class="btn-group">						
							<button  class="btn" ng-click="checkSpots()" tooltip="common.masscheck.tooltip">
								<i class="icon-check icon-black"></i>
							</button>						
						</div>
						<div class="btn-group">
						  <a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
						  	<span l="common.action">Action</span>
						    <span class="caret"></span>
						  </a>
						  <ul class="dropdown-menu">
						  	<li class="nav-header" l="spots.listheader.selected">
						  		Selected ...
						  	</li>
						  	<li>
						  		<a  class="" ng-click="setCheckedSpotsActiveState(true)">
									<i class="icon-ok icon-black"></i> <span l="spots.action.setactive">Set active</span>
								</a>
						  	</li>						    
							<li>
								<a  class="" ng-click="setCheckedSpotsActiveState(false)">
									<i class="icon-ban-circle icon-black"></i> <span l="spots.action.setinactive">Set inactive</span>
								</a>
							</li>
							<li>
								<a  class="" data-toggle="modal" data-target="#generatePdfCheckedSpotsModal" ng-click="generatedSpotsDocumentName = null">
									<i class="icon-file icon-black"></i> <span l="spots.action.generatepdf">Generate PDF</span>
								</a>
							</li>						
							<li>
								<a  class="" data-toggle="modal" data-target="#deleteCheckedSpotsModal">
									<i class="icon-trash icon-black"></i> <span l="common.delete">delete</span>
								</a>
							</li>
							<li class="divider">
							</li>
							<li class="nav-header" l="spots.listheader.create">
						  		Create ...
						  	</li>
							<li>
								<a  class="" ng-click="createSpot()">
									<i class="icon-plus-sign icon-black"></i> <span l="common.new">New</span>
								</a>
							</li>
							<li>
								<a  class="" href="#spotMassCreationDialog" data-toggle="modal" ng-click="spotMassCreation = null"><i class="icon-th icon-black"></i> <span l="spot.masscreation.button">Multiple</span></a>
							</li>
							
						  </ul>
						</div>
						<!-- <div class="btn-group">
							<button  class="btn btn-success" ng-click="setCheckedSpotsActiveState(true)" tooltip="spots.massactivate.tooltip">
								<i class="icon-ok icon-white"></i>
							</button>
							<button  class="btn btn-danger" ng-click="setCheckedSpotsActiveState(false)" tooltip="spots.massdeactivate.tooltip">
								<i class="icon-ban-circle icon-white"></i>
							</button>
							<button  class="btn btn" data-toggle="modal" data-target="#deleteCheckedSpotsModal" tooltip="spots.massdelete.tooltip">
								<i class="icon-trash icon-black"></i>
							</button>
						</div> -->					
		    			<div class="btn-group">
			    			<!-- <form class="form-inline">
		 						<div class="controls">  -->
			    					<div class="input-prepend" style="margin-bottom:0;">
		            					<span class="add-on"><i class="icon-search icon-black"></i>
		            					</span>
		            					<input l="common.search" type="text" l-attribute="placeholder" placeholder="Search" ng-model="spotsQuery.name">
		            					<i class="icon-remove icon-black" ng-click="spotsQuery = null">
		        						</i> 
		        					</div>
							<!-- 	</div>
			    			</form> -->
 			    			</div>
					</div>
					<span style="font-size: 10px;" l="spots.filtered.status">Spots count {{filteredSpots.length}} | checked {{getCheckedSpotsCount()}}</span>
					<div class="pull-right"><i class="icon-ban-circle icon-black"></i> <span l="spots.legend.inactive">Inactive</span></div>
				</div>
				<div class="data-container-block data-container-seperator" ng-show="currentArea.welcome">
					<p l="areas.spots.list.description.welcome">This is a special welcome area with a welcome spot. You can't delete or add spots to a welcome area. 
						A welcome spot represents your entire location. People can use it to check-in, view your informations and services. But can't do stuff like ordering products.</p>
				</div>
				<ul class="nav-pills-checkbox data-container-block data-container-small data-container-scrollable" id="spotsList">
				        <li ng-repeat="spot in filteredSpots = (spots | filter:spotsQuery) | orderBy:['-master', 'name'] " >	        					        	
				        	<div ng-class="{active: currentSpot.id == spot.id}" ng-click="loadSpot(spot, $event)">
				        		<div>
				        			<input type="checkbox" ng-model="spot.checked">
				        		</div>
			        			<div><span ng-bind="spot.name" ng-hide="spot.master"></span><b ng-bind="spot.name" ng-show="spot.master"></b> <i class="icon-ban-circle icon-black" ng-hide="spot.active"></i></div>
			        		</div>
			        	</li>
		    	</ul>
			</div>
		</div>
		<!-- empty spot container placeholder -->
		<div class="span4" ng-hide="currentArea">
			<div class="data-container-with-title data-container-small data-container-inactive">
	    		<h4 class="data-container-title" l="areas.detail.title">Edit Service Area</h4>
	    		<div class="data-container-block">
	    			<p l="areas.container.empty.description">Shows the selected area details. Select an area from the list.</p>
	    		</div>
	    	</div>
		</div>
		<!-- spots detail -->
		<div class="span4" ng-show="currentSpot">
			<div class="data-container-with-title">
				<h4 class="data-container-title" l="areas.spot.detail.title">Edit Spot</h4>
				<div class="data-container-block">
					<div simple-property-editor editor-title="spots.editor.name" editor-property="currentSpot.name" editor-on-save="saveSpot()" editor-required editor-max-length="20">
						<h4 class="edit" tooltip="spots.editor.name.tooltip">
						<span l="areas.placeholder.name" ng-hide="currentSpot.name" ng-class="{'text-error' : spotInvalid, 'simple-property-placeholder' : !spotInvalid}">Name *</span>
						{{currentSpot.name}} <i class="icon-edit icon-black"></i></h4>
					</div>
					<div ng-show="spotInvalid" class="text-error">
		    		<span l="validation.field.required">* Please fill out all required fields.</span>
		    	</div>
	    		<img ng-show="currentSpot.qrImageUrl" ng-src="{{currentSpot.qrImageUrl}}" alt="Spot Barcode"/>
	    		<p>{{currentSpot.barcode}}</p>
	    		<p ng-show="currentSpot.master" l="spot.master.description">This is the "master" Spot for this area, it cannot be deleted, unless you delete the Area.</p>
	    		<div class="row-fluid" ng-show="currentSpot.id && currentSpot.welcome">
    			<!-- code for cloobster widget button, show only for welcome spots -->
	    			<p><small l="spot.cloobsterwidget">Copy and paste snippet on a website for direct cloobster Check-in at this spot when app is isntalled!</small></p>
					<textarea readonly="readonly" rows="4" class="span12" style="white-space:nowrap">
						<a href="https://go.cloobster.com/x/spot/{{currentSpot.barcode}}" class="cloobster-checkin-button">cloobster Check-in</a>
						<script type="text/javascript">
							!function(f,a,g){var e,b=f.getElementsByTagName(a)[0],c=/^http:/.test(f.location)?"http":"https";if(!f.getElementById(g)){e=f.createElement(a);e.id=g;e.src=c+"://cloobster.com/js/widget.js";b.parentNode.insertBefore(e,b)}}(document,"script","cloobster-widget");
						</script>					 
					</textarea>
				</div>
	    		<div class="row-fluid" ng-show="currentSpot.id">	    			
	    			<button class="btn btn-success span6" type="button" ng-click="toggleSpotActive()" ng-model="currentSpot.active" ng-show="currentSpot.active && currentSpot.id"><i class="icon-ok icon-white"></i> <span l="common.active">Active</span></button>
		  			<button class="btn btn-danger span6" style="margin-left: 0px !important;" type="button" ng-click="toggleSpotActive()" ng-model="currentSpot.active" ng-show="!currentSpot.active && currentSpot.id"><i class="icon-ban-circle icon-white"></i> <span l="common.inactive">Inactive</span></button>

		    		<button class="btn span6" data-toggle="modal" data-target="#deleteSpotModal" ng-show="!currentSpot.welcome && !currentSpot.master"><i class="icon-trash"></i></button>
		    		<!-- Modal delete dialog. -->
		    		<div class="modal hide" id="deleteSpotModal">
						 	<div class="modal-header">
						    	<button type="button" class="close" data-dismiss="modal">×</button>
						    	<h3 l="spot.action.delete">Delete Spot</h3>
							</div>
							<div class="modal-body alert-error">
						    	<p><span l="spot.action.delete.text">{{currentSpot.name}} will be deleted!<br/>Already printed barcodes can't be reused afterwards!</span></p>
						    </div>  
						  	<div class="modal-footer">
						  		<button type="button" class="btn" data-dismiss="modal" l="common.cancel">Cancel</button>
						    	<button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteSpot(currentSpot)" l="common.delete">Delete</button>
							</div>
						</div>
		    	</div>
				</div>
			</div>
		</div>
		<!-- empty spot container placeholder -->
		<div class="span4" ng-hide="currentSpot">
			<div class="data-container-with-title data-container-small data-container-inactive">
	    		<h4 class="data-container-title" l="areas.spot.detail.title">Edit Spot</h4>
	    		<div class="data-container-block">
	    			<p l="areas.spot.container.empty.description">Shows the selected spot details. Select a spot from the list.</p>
	    		</div>
	    	</div>
		</div>
	</div>
</div>
<!-- Modal to generate multiple spots -->
<div class="modal hide fade" id="spotMassCreationDialog">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3 l="spots.masscreation.title" >Spot mass creation dialog</h3>    
  </div>
  <div class="modal-body">
  	<p l="spots.masscreation.description">Here you can create multiple spots at once.</p>
    	<form class="form" name="spotMassCreationForm">
			<div class="control-group" ng-class="getFieldInputClass(spotMassCreationForm.massCreationName)">				
				<div class="controls">
					<label class="control-label" for="spots.masscreation.name" l="spots.masscreation.name">Name*</label>
					<div class="controls">
						<input id="spots.masscreation.name" name="massCreationName" type="text" l="spots.masscreation.placeholder.name" l-attribute="placeholder" placeholder="e.g. room or table" ng-model="spotMassCreation.name" required>
						<div class="help-inline" ng-show="spotMassCreationForm.massCreationName.$dirty && spotMassCreationForm.massCreationName.$invalid">
							<span ng-show="spotMassCreationForm.massCreationName.$error.required" l="propertyeditor.error.required">Required field</span>
						</div>
					</div>
				</div>
			</div>
			<div class="control-group">
				<div class="controls">
					<label class="control-label" for="spots.masscreation.startnumber" l="spots.masscreation.startnumber">Starting number</label>
					<div class="controls">
						<input type="number" id="spots.masscreation.startnumber" name="massCreationStartNumber" l="spots.masscreation.placeholder.startnumber" l-attribute="placeholder" placeholder="e.g. 100" ng-model="spotMassCreation.startNumber">
						<!-- <div class="help-inline" ng-show="spotMassCreationForm.massCreationName.$dirty && spotMassCreationForm.massCreationName.$invalid">
							<span ng-show="spotMassCreationForm.massCreationName.$error.required" l="propertyeditor.error.required">Required field</span>						
						</div> -->
					</div>
				</div>
			</div>
			<div class="control-group" ng-class="getFieldInputClass(spotMassCreationForm.massCreationCount)">
				<label class="control-label" for="spots.masscreation.count" l="spots.masscreation.count">Count*</label>
				<div class="controls">
					<input id="spots.masscreation.count" name="massCreationCount" type="number" l="spots.masscreation.placeholder.count" l-attribute="placeholder" placeholder="e.g. 50" ng-model="spotMassCreation.count" required min="1" max="500">
					<div class="help-inline" ng-show="spotMassCreationForm.massCreationCount.$dirty && spotMassCreationForm.massCreationCount.$invalid">
						<span ng-show="spotMassCreationForm.massCreationCount.$error.required" l="propertyeditor.error.number">Required field</span>
						<span ng-show="spotMassCreationForm.massCreationCount.$error.min" l="spots.masscreation.count.error.min">Min. number is 1</span>
						<span ng-show="spotMassCreationForm.massCreationCount.$error.max" l="spots.masscreation.count.error.max">Max. number is 500</span>
					</div>
				</div>
			</div>
		</form>
		<p l="registration.form.requiredfield">* marks required fields</p>
  </div>
  <div class="modal-footer">
  	<button class="btn" l="common.cancel" data-dismiss="modal" ng-click="spotMassCreation = null;">Cancel</button>
	<button class="btn btn-primary" l="common.save" ng-click="generateSpots()" ng-disabled="spotMassCreationForm.$invalid">Save</button>
  </div>
</div>

</div>

<!-- Modal delete dialog start -->
<div class="modal hide" id="deleteCheckedSpotsModal">
 	<div class="modal-header">
    	<button type="button" class="close" data-dismiss="modal">×</button>
    	<h3 l="spots.massdelete.title">Delete Selected Spots</h3>
	</div>
	<div class="modal-body alert-error">
    	<p><span l="spots.massdelete.description">Selected spots will be deleted.<br/>Already printed barcodes can't be reused afterwards!</span></p>
    </div>
  	<div class="modal-footer">
  		<button type="button" class="btn" data-dismiss="modal" l="common.cancel">Cancel</button>
    	<button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="deleteCheckedSpots()" l="common.delete">Delete</button>
	</div>
</div>

<!-- Modal pdf generate dialog start -->
<div class="modal hide" id="generatePdfCheckedSpotsModal">
 	<div class="modal-header">
    	<button type="button" class="close" data-dismiss="modal">×</button>
    	<h3 l="spots.action.generatepdf" ng-hide="generatePDFRequested">Generate PDF</h3>
    	<h3 l="spots.action.generatepdf.requested" ng-show="generatePDFRequested">Generate PDF - Request sent</h3>

	</div>
	<div class="modal-body alert-info">
			<div ng-hide="generatePDFRequested">
	    	<p><span l="spots.action.generatepdf.description">Generate a PDF for the selected spots. You can watch the status of this job in the documents tab.<br/>
	    		When the job is finished you can download the PDF from there.<br/>You have selected <strong>{{getCheckedSpotsCount()}</strong> spots.</span></p>
    		<label for="generatedSpotsDocumentName" l="spots.generatepdf.documentname">Optional document name:</label>
    		<input type="text" id="generatedSpotsDocumentName" style="width: 80%;" ng-model="generatedSpotsDocumentName" placeholder="e.g. Barcodes Rooms 100 to 199" l-attribute="placeholder" l="spots.generatepdf.documentname.placeholder">
    		<p style="color:red;" ng-show="generatedSpotsDocumentName.length > 100" l="spots.generatepdf.documentname.maxlength">Maximum of 100 characters allowed.</p>
    	</div>
    	<div ng-show="generatePDFRequested">
    		<p l="reports.action.export.dialog.complete" ng-show="generatePDFRequested">Your request is being processed and the file will be available under Documents soon.</p>
    	</div>	
    </div>
  	<div class="modal-footer">
  		<button type="button" class="btn" data-dismiss="modal" l="common.cancel" ng-click="generatePDFRequested=false">Cancel</button>
    	<button type="button" class="btn btn-primary" ng-disabled="generatedSpotsDocumentName.length > 100 || getCheckedSpotsCount() == 0" ng-click="generatePdfForCheckedSpots(generatedSpotsDocumentName)" l="common.generate" ng-hide="generatePDFRequested">Generate</button>
    	<button type="button" class="btn btn-primary" ng-click="gotoDocuments()" ng-show="generatePDFRequested" l="reports.report.documents.open" data-dismiss="modal">Open Documents</button>
	</div>
</div>
<!-- Modal confirm export dialog. -->
<div class="modal hide" id="documentCreated">
 	<div class="modal-header">
    	<button type="button" class="close" data-dismiss="modal">×</button>
    	<h4 l="reports.action.export.dialog.title" ng-hide="exportRequested">Confirm Excel export</h4>
    	<h4 l="reports.action.export.dialog.requested.title" ng-show="exportRequested">Excel export requested</h4>
	</div>
	<div class="modal-body">
  	<p l="reports.action.export.dialog.text" ng-hide="exportRequested">Do you want to export the selected data to an Excel file?</p>
  	<p l="reports.action.export.dialog.complete" ng-show="exportRequested">Your request is being processed and the file will be available under Documents soon.</p>
  	<p class="text-error" l="reports.report.noresult" ng-show="exportError && reportData == 'noresult'">No results found</p>
  </div>
  <div class="modal-footer" >
		<button type="button" ng-show="exportError || exportRequested" class="btn" data-dismiss="modal" ng-click="exportRequested=false" l="common.close">Okay</button>
  	<button type="button" class="btn btn-primary" ng-click="gotoDocuments()" ng-show="exportRequested" l="reports.report.documents.open" data-dismiss="modal">Open Documents</button>
		<button type="button" class="btn" data-dismiss="modal" l="common.cancel" ng-hide="exportRequested || exportError">Cancel</button>
  	<button type="button" class="btn btn-primary" ng-click="generateReport()" l="reports.action.export.xls" ng-hide="exportRequested || exportError">Generate</button>
	</div>
