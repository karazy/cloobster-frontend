<div ng-include="'partials/businesses_header.html'"></div>
<div class="row-fluid">
		<p l="business.detail.help">Here you can manage the profil information for your selected business.<br>
			You also can customize the CI which affects how your business is presented in the app.</p>
	</div>
</div>
<div class="data-container-with-title">
	<h4 class="data-container-title" l="businesses.headertabs.locationsettings">Location Settings</h4>
	<div class="data-container-block data-container-seperator">
		<button type="button" ng-hide="editMode" class="btn btn-primary" ng-click="toggleEditMode()" l="business.action.edit.enable">Edit Profile</button>
	<div ng-show="editMode">
		<button type="button" class="btn btn-primary" ng-click="toggleEditMode()" l="business.action.edit.disable">Done editing</button> 
		<span l="business.action.edit.disable.hint">Click a profile feature to edit.</span>
	</div>
		<button ng-hide="editMode" ng-click="showDeleteDialog(activeBusiness)" class="btn"><i class="icon-trash icon-black"></i> <span l="businesses.action.delete">Delete Business</span></button>
	</div>
		<div class="data-container-block data-container-seperator">
			<h3 l="business.detail.section.profile">Location Profile</h3>
			<div simple-property-editor editor-title="business.detail.name" editor-property="activeBusiness.name" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-required>
				<h1 ng-class="getEditModeClass()">{{activeBusiness.name}}</h1>
			</div>
			<div simple-property-editor editor-title="business.detail.description" editor-property="activeBusiness.description" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-type="textarea" editor-required>
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.description">Description</div>
					<div class="value">{{activeBusiness.description}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.stars" editor-property="activeBusiness.stars" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-type="number" editor-required>
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.stars">Stars</div>
					<div class="value">{{activeBusiness.stars}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.slogan" editor-property="activeBusiness.slogan" editor-on-save="saveBusiness()" editor-enabled="editMode">
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.slogan">Slogan</div>
					<div class="value">{{activeBusiness.slogan}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.url" editor-property="activeBusiness.url" editor-on-save="saveBusiness()" editor-enabled="editMode">
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.url">Website</div>
					<div class="value">{{activeBusiness.url}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.email" editor-property="activeBusiness.email" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-type="email">
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.email">E-Mail</div>
					<div class="value">{{activeBusiness.email}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.address" editor-property="activeBusiness.address" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-required>
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.address">Address</div>
					<div class="value">{{activeBusiness.address}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.city" editor-property="activeBusiness.city" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-required>
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.city">City</div>
					<div class="value">{{activeBusiness.city}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.postcode" editor-property="activeBusiness.postcode" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-required>
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.postcode">Postcode</div>
					<div class="value">{{activeBusiness.postcode}}</div>
				</div>
			</div>
			<div simple-property-editor editor-title="business.detail.phone" editor-property="activeBusiness.phone" editor-on-save="saveBusiness()" editor-enabled="editMode">
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.phone">Phone</div>
					<div class="value">{{activeBusiness.phone}}</div>
				</div>
			</div>
			<div >
				<div class="data-element">
					<div class="key" l="business.detail.currency">Currency</div>
					<select ng-model="activeBusiness.currency" class="value" ng-disabled="!editMode" ng-change="saveBusiness()" required>
						<option selected="selected" value="EUR">Euro</option>
						<option selected="selected" value="USD">US Dollar</option>
					</select>
				</div>
			</div>
			<div >
				<div class="data-element">
					<div class="key" l="business.detail.language">Sprachen</div>
					<div class="value">
							<button ng-disabled="!editMode" class="btn" ng-click="loadLanguageSelection()">Auswählen</button>
				</div>				
				</div>
			</div>
			<div>
				<div class="data-element">
					<div class="key" l="business.detail.paymentmethods">
						Paymentmethods
					</div>
					<div class="value">
						<ul class="payment-method-list">
							<li>
								<button class="btn" ng-click="addPaymentMethod()" ng-disabled="!editMode"><i class="icon-plus icon-black"></i><span l="business.detail.paymentmethods.list.new"> New payment method...</span></button>
							</li>
							<li ng-repeat="method in activeBusiness.paymentMethods" ng-class="getEditModeClass()">
								<div class="row-fluid">	
									<div class="span10">
										<div simple-property-editor editor-title="business.detail.paymentmethod" editor-property="method.name" editor-on-save="saveBusiness()" editor-enabled="editMode" editor-required>
											<span>{{method.name}}</span>
										</div>
									</div>
									<div class="span2">
										<button class="btn btn-small" ng-click="removePaymentMethod($index)" ng-disabled="!editMode"><i class="icon-trash"></i></button>
									</div>
								</div>
							</li>
							
						</ul>
					</div>
				</div>
			</div>
		</div>
		<div class="data-container-block data-container-seperator">
			<h3 l="business.detail.section.app">App Configration</h3>
			<p l="business.detail.section.app.description">Configure the look of the cloobster Application to best fit your CI.</p>
			<div class="data-element">
				<div class="key" l="business.detail.app.header">
					App Header Image
				</div>
				<div class="value">
				<div simple-image-editor="activeBusiness.images.appheader" editor-title-key="business.detail.app.header" editor-image-id="appheader" editor-on-save="setImage(image)" editor-on-cancel="discardImage(image)" editor-enabled="editMode" editor-image-resource="imageResource" editor-crop-text="business.detail.app.header.description" editor-ratio="3:1">
					<div ng-show="activeBusiness.images.appheader.url">
						<img  ng-src="{{activeBusiness.images.appheader.url}}=s96" alt="click to edit" />
						<p ng-show="editMode" l="business.detail.picture.edit">Click image to edit</p>
					</div>
					<button ng-show="!activeBusiness.images.appheader" ng-disabled="!editMode" class="btn" l="business.detail.add.image.button">Add Image</button>
				</div>
				</div>
			</div>
			<div class="data-element">
				<div class="key" l="business.detail.logo">
					Logo Picture
				</div>
				<div class="value">
					<div simple-image-editor="activeBusiness.images.logo" editor-title-key="business.detail.logo.editor.title" editor-image-id="logo" editor-on-save="setImage(image)" editor-on-cancel="discardImage(image)" editor-enabled="editMode" editor-image-resource="imageResource">
						<div ng-show="activeBusiness.images.logo.url">
							<img  ng-src="{{activeBusiness.images.logo.url}}=s96" alt="click to edit" />
							<p ng-show="editMode" l="business.detail.picture.edit">Click image to edit</p>
						</div>
						<button ng-show="!activeBusiness.images.logo" ng-disabled="!editMode" class="btn" l="business.detail.logo.button">Add Logo</button>
					</div>
				</div>
			</div>
			<div class="data-element">				
				<div class="key" l="business.detail.themes">
					Themes
				</div>
				<div class="value">
					<p l="business.detail.themes.description">Choose a theme which fits your CI best.</p>
					<div class="business-theme-preview" ng-class="{active: activeBusiness.theme == 'default'}" ng-click="activateTheme('default')" tooltip="business.detail.themes.tooltip">
						<img  src="img/themes/default-theme.png" alt="click to activate"/>
						<p l="business.detail.themes.default.description">Default cloobster theme</p>
					</div>
					<div class="business-theme-preview" ng-class="{active: activeBusiness.theme == 'red'}" ng-click="activateTheme('red')" tooltip="business.detail.themes.tooltip">
						<img  src="img/themes/red-theme.png" alt="click to activate"/>
						<p l="business.detail.themes.red.description">A red and elegant theme</p>
					</div>
					<div class="business-theme-preview" ng-class="{active: activeBusiness.theme == 'green'}" ng-click="activateTheme('green')" tooltip="business.detail.themes.tooltip">
						<img  src="img/themes/green-theme.png" alt="click to activate"/>
						<p l="business.detail.themes.green.description">A green and friendly theme</p>
					</div>
					<div class="business-theme-preview" ng-class="{active: activeBusiness.theme == 'orange'}" ng-click="activateTheme('orange')" tooltip="business.detail.themes.tooltip">
						<img  src="img/themes/orange-theme.png" alt="click to activate"/>
						<p l="business.detail.themes.orange.description">An orange and cosy theme</p>
					</div>
				</div>
			</div>
		</div>
		<div class="data-container-block data-container-seperator">
			<h3 l="business.detail.section.facebook">Facebook Configuration</h3>
			<p l="business.detail.section.facebook.description">Configure how post in Facebook will appear.</p>
			<div simple-property-editor editor-title="business.detail.facebook.url" editor-property="activeBusiness.fbUrl" editor-on-save="saveBusiness()" editor-enabled="editMode">
				<div class="data-element" ng-class="getEditModeClass()">
					<div class="key" l="business.detail.facebook.url">Facebook URL</div>
					<div class="value">{{activeBusiness.fbUrl}}</div>
				</div>
			</div>
			<div class="data-element">
				<div class="key" l="business.detail.facebook.wallpost.image">
					Wall post Image
				</div>
				<div class="value">
					<div simple-image-editor="activeBusiness.images.fbwallpost" editor-title-key="business.detail.facebook.wallpost.image" editor-image-id="fbwallpost" editor-on-save="setImage(image)" editor-on-cancel="discardImage(image)" editor-enabled="editMode" editor-image-resource="imageResource" editor-crop-text="business.detail.facebook.wallpost.image.description" editor-ratio="4:3">
						<div ng-show="activeBusiness.images.fbwallpost.url">
							<img  ng-src="{{activeBusiness.images.fbwallpost.url}}=s96" alt="click to edit" />
							<p ng-show="editMode" l="business.detail.picture.edit">Click image to edit</p>
						</div>
						<button ng-show="!activeBusiness.images.fbwallpost" ng-disabled="!editMode" class="btn" l="business.detail.add.image.button">Add Image</button>
					</div>
				</div>
			</div>
		</div>
		<div class="data-container-block data-container-seperator">
			<h3 l="business.detail.section.pictures">Upload more pictures</h3>
			<div class="row-fluid">
				<div class="span12">					
					<div class="row-fluid">
						<div class="span4">
							<div simple-image-editor="activeBusiness.images.picture1" editor-title-key="business.detail.picture1.editor.title" editor-image-id="picture1" editor-on-save="setImage(image)" editor-on-cancel="discardImage(image)" editor-enabled="editMode" editor-image-resource="imageResource">
								<div ng-show="activeBusiness.images.picture1.url">
									<img  ng-src="{{activeBusiness.images.picture1.url}}=s128" alt="click to edit" />
									<p ng-show="editMode" l="business.detail.picture.edit">Click image to edit</p>
								</div>
								<button ng-show="!activeBusiness.images.picture1" ng-disabled="!editMode" class="btn" l="business.detail.picture1.button">Add Profile Picture1</button>
							</div>
						</div>
						<div class="span4">
							<div simple-image-editor="activeBusiness.images.picture2" editor-title-key="business.detail.picture2.editor.title" editor-image-id="picture2" editor-on-save="setImage(image)" editor-on-cancel="discardImage(image)" editor-enabled="editMode" editor-image-resource="imageResource">
								<div ng-show="activeBusiness.images.picture2.url">
									<img  ng-src="{{activeBusiness.images.picture2.url}}=s128" alt="click to edit" />
									<p ng-show="editMode" l="business.detail.picture.edit">Click image to edit</p>
								</div>
								<button ng-show="!activeBusiness.images.picture2" ng-disabled="!editMode" class="btn" l="business.detail.picture2.button">Add Profile Picture2</button>
							</div>
						</div>
						<div class="span4">
							<div simple-image-editor="activeBusiness.images.picture3" editor-title-key="business.detail.picture3.editor.title" editor-image-id="picture3" editor-on-save="setImage(image)" editor-on-	cancel="discardImage(image)" editor-enabled="editMode" editor-image-resource="imageResource">
								<div ng-show="activeBusiness.images.picture3.url">
									<img  ng-src="{{activeBusiness.images.picture3.url}}=s128" alt="click to edit" />
									<p ng-show="editMode" l="business.detail.picture.edit">Click image to edit</p>
								</div>
								<button ng-show="!activeBusiness.images.picture3" ng-disabled="!editMode" class="btn" l="business.detail.picture3.button">Add Profile Picture3</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	<!-- </div> -->
</div>

<div class="modal hide" id="deleteModal">
 	<div class="modal-header">
    	<button type="button" class="close" data-dismiss="modal">×</button>
    	<h3 l="businesses.dialog.delete">Delete Location</h3>
	</div>
	<form name="businessDeleteForm" ng-submit="deleteBusiness()" novalidate>
		<div class="modal-body alert-error">
	    	<p l="business.dialog.delete.text">Attention! You're about to delete {{activeBusiness.name}}. The location will be inactivated and put into a read-only mode. Users currently locked in will be able to see their current status (e. g. orders) but can't execute further actions. Location will be kept for a while before it will be deleted permanently.</p>
	    	<p l="dialog.delete.confirm">Please confirm your delete attempt by entering your password.</p>
    		<label for="deletePassword" l="common.password">Password</label>
    		<input type="password" id="deletePassword" name="deletePassword" ng-model="deletePassword" required></input>
    		<span>{{deleteError}}</span>
	    </div>
	  	<div class="modal-footer">
	  		<button type="button" class="btn" data-dismiss="modal" l="common.cancel">Cancel</button>
	    	<button type="submit" class="btn btn-danger" ng-disabled="!deletePassword" l="common.delete">Delete</button>
		</div>
	</form>
</div>
<!-- Floating Dialog for language selection -->
<div class="data-container-floating" ng-show="langSelection">
	<h4 class="data-container-title" l="business.languageselection.title">Language selection</h4>
	<!-- <div style="position: relative; clear: both; float: left; width: 100%; overflow: hidden;"> -->
	<div class="data-container-block data-container-seperator">
		<p l="business.languageselection.description">Please select the languages you want to support.</p>
		<!-- <div class="row-fluid"> -->
		<form class="form-inline" style="margin: 7px 0;">
			<!-- <div class="controls"> -->
				<div class="input-prepend">
					<span class="add-on"><i class="icon-search icon-black"></i></span><input type="text" l="common.search" l-attribute="placeholder" placeholder="Search" ng-model="languageQuery.lang">
				</div>
				<i class="icon-remove icon-black" ng-click="languageQuery.lang = ''"></i>								
				<button class="btn btn-success" style="margin-left: 10px;" type="button" ng-click="languageQuery.selected = ''" ng-model="currentMenu.active" ng-show="languageQuery.selected"><i class="icon-ok icon-white"></i> <span l="common.active">Active</span></button>

	    		<button class="btn" style="margin-left: 10px;" type="button" ng-click="languageQuery.selected = true" ng-model="currentMenu.active" ng-show="!languageQuery.selected"><i class="icon-ban-circle icon-white"></i> <span l="common.all">All</span></button>
			<!-- </div>			 -->
		</form>		
		
		<!-- </div> -->
	</div>
	<div class="data-container-block row-fluid data-container-scrollable data-container-dynamic">
		<div ng-repeat="lang in langcodes | filter:languageQuery" class="span2" style="margin-left: 5px;">
			<span>
				<input type="checkbox" ng-model="lang.selected" id="langcode_{{lang.code}}" value="{{lang.code}}"> <label for="langcode_{{lang.code}}" style="display: inline;">{{lang.lang}}</label>
			</span>
		</div>
	</div>
	<div class="row-fluid data-container-block">
		<button class="btn span3" l="common.cancel" ng-click="langSelection = false;">Cancel</button>
		<button class="btn btn-primary span3" l="common.save" ng-click="saveLanguageSelection()">Save</button>
	</div>
	<!-- </div> -->
</div>

